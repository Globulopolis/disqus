var disqus_shortname,disqus_identifier,disqus_url;
(function(b){var c={};b.fn.extend({inlineDisqussions:function(a){c=b.extend({},{identifier:"disqussion",displayCount:!0,highlighted:!1,position:"right",background:"white",maxWidth:9999},a);0===b("#disqussions_wrapper").length&&b('<div id="disqussions_wrapper"></div>').appendTo(b("body"));0===b("#disqus_thread").length?b('<div id="disqus_thread"></div>').appendTo("#disqussions_wrapper"):m();c.highlighted&&b('<div id="disqussions_overlay"></div>').appendTo(b("body"));b(this).each(function(a){n(a,b(this))});
c.displayCount&&p();b("html").click(function(a){0===b(a.target).parents("#disqussions_wrapper, .main-disqussion-link-wrp").length&&h()})}});var n=function(a,f){var d;if(f.attr("data-disqus-identifier"))d=f.attr("data-disqus-identifier");else{for(;0<b('[data-disqus-identifier="'+window.location.pathname+c.identifier+"-"+a+'"]').length;)a++;d=window.location.pathname+c.identifier+"-"+a}var e=b('<a class="'+(c.highlighted?"disqussion-link disqussion-highlight":"disqussion-link")+'" />').attr("href",
window.location.pathname+c.identifier+"-"+a+"#disqus_thread").attr("data-disqus-identifier",d).attr("data-disqus-url",window.location.href+c.identifier+"-"+a).attr("data-disqus-position",c.position).text("+").wrap('<div class="disqussion" />').parent().appendTo("#disqussions_wrapper");e.css({top:f.offset().top,left:"right"==c.position?f.offset().left+f.outerWidth():f.offset().left-e.outerWidth()});f.attr("data-disqus-identifier",d).mouseover(function(){e.addClass("hovered")}).mouseout(function(){e.removeClass("hovered")});
e.delegate("a.disqussion-link","click",function(a){a.preventDefault();b(this).is(".active")?(a.stopPropagation(),h()):k(b(this),function(a){l(a)})})},m=function(){0===b("a.main-disqussion-link").length&&b('<a class="main-disqussion-link" />').attr("href",window.location.pathname+"#disqus_thread").text("Comments").wrap('<h2 class="main-disqussion-link-wrp" />').parent().insertBefore("#disqus_thread").delegate("a.main-disqussion-link","click",function(a){a.preventDefault();b(this).is(".active")?a.stopPropagation():
k(b(this),function(a){l(a,!0)})})},k=function(a,c){var d=a.attr("data-disqus-identifier"),e=a.attr("data-disqus-url");if(window.DISQUS)DISQUS.reset({reload:!0,config:function(){this.page.identifier=d;this.page.url=e}});else{disqus_identifier=d;disqus_url=e;var g=document.createElement("script");g.type="text/javascript";g.async=!0;g.src="//"+disqus_shortname+".disqus.com/embed.js";b("head").append(g)}b("a.disqussion-link, a.main-disqussion-link").removeClass("active").filter(a).addClass("active");
a.is(".disqussion-highlight")&&q(d);c(a)},p=function(){var a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="//"+disqus_shortname+".disqus.com/count.js";b("head").append(a);window.setTimeout(function(){b(".disqussion-link").filter(function(){return b(this).text().match(/[1-9]/g)}).addClass("has-comments")},1E3)},l=function(a,f){var d={};!0===f?(b("#disqus_thread").removeClass("positioned"),d={position:"static",width:"auto"}):(b("#disqus_thread").addClass("positioned"),
d={position:"absolute"});d.backgroundColor=c.background;var e={};"right"==a.attr("data-disqus-position")?e={top:a.offset().top,left:a.offset().left+a.outerWidth(),width:Math.min(parseInt(b(window).width()-(a.offset().left+a.outerWidth()),10),c.maxWidth)}:"left"==a.attr("data-disqus-position")&&(e={top:a.offset().top,left:a.offset().left-Math.min(parseInt(a.offset().left,10),c.maxWidth),width:Math.min(parseInt(a.offset().left,10),c.maxWidth)});b("#disqus_thread").stop().fadeIn("fast").animate(e,"fast").css(d)},
h=function(){b("#disqus_thread").stop().fadeOut("fast");b("a.disqussion-link").removeClass("active");b("#disqussions_overlay").fadeOut("fast");b("body").removeClass("disqussion-highlight");b("[data-disqus-identifier]").removeClass("disqussion-highlighted")},q=function(a){b("body").addClass("disqussion-highlight");b("#disqussions_overlay").fadeIn("fast");b("[data-disqus-identifier]").removeClass("disqussion-highlighted").filter('[data-disqus-identifier="'+a+'"]:not(".disqussion-link")').addClass("disqussion-highlighted")}})(jQuery);
